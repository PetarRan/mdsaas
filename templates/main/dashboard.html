<!DOCTYPE html>
<html>

<head>
    <title>User Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./dashboard.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">
            <img src="../static/banner-dark.png" width="auto" height="30" alt="Logo">
        </a>
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fa fa-sign-out" aria-hidden="true"></i> Logout
                </a>
            </li>
        </ul>
    </nav>

    <section>
        <div class="row" style="height: 90vh;">
            <div class="col-md-10">
                <h2 class="mx-2 my-2">Welcome, [USERNAME]</h2>
                <ul class="nav nav-tabs" id="myTabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="documents-tab" data-toggle="tab" href="#documents" role="tab"
                            aria-controls="documents" aria-selected="true">Documents</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="summaries-tab" data-toggle="tab" href="#summaries" role="tab"
                            aria-controls="summaries" aria-selected="false">Summaries</a>
                    </li>
                </ul>

                <!-- Tab content -->
                <div class="tab-content" id="myTabsContent">
                    <div class="tab-pane fade show active" id="documents" role="tabpanel"
                        aria-labelledby="documents-tab">
                        <div class="d-flex flex-row flex-wrap mt-4" id="document-container">
                            <!-- Dummy Card -->
                            <div class="card m-2" id="dummy-card" style="max-width: 350px; min-width: 350px;">
                                <div class="card-body">
                                    <div class="custom-control custom-checkbox" style="text-align: end;">
                                        <input type="checkbox" class="custom-control-input checkbox-on-card"
                                            id="customCheck1">
                                        <label class="custom-control-label" for="customCheck1"></label>
                                    </div>
                                    <h5 class="card-title"
                                        style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Document
                                        Name
                                    </h5>
                                    <p class="card-text">Date Uploaded: January 1, 2023</p>
                                    <p class="card-text">Document type: PDF</p>
                                    <button class="btn btn-outline-primary"><i class="fa fa-eye"></i>&nbsp;View
                                        Document</button>
                                    <button class="btn btn-outline-danger"> <i
                                            class="fa fa-trash"></i>&nbsp;Delete</button>
                                </div>
                            </div>
                            <!-- Add more cards as needed -->
                        </div>
                    </div>
                    <div class="tab-pane fade" id="summaries" role="tabpanel" aria-labelledby="summaries-tab">
                        <div class="d-flex flex-row flex-wrap mt-4" id="summaries-container">
                            <div class="card m-2" id="dummy-summary-card" style="max-width: 350px; min-width: 350px;">
                                <div class="card-body">
                                    <h5 class="card-title"
                                        style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Summary
                                        Title</h5>
                                    <p class="card-text">Date Created: January 1, 2023</p>
                                    <p class="card-text">Summarization Method: SpaCy</p>
                                    <button class="btn btn-outline-primary"><i class="fa fa-eye"></i>&nbsp;View
                                        Summary</button>
                                    <button class="btn btn-outline-danger"> <i class="fa fa-trash"></i>&nbsp;Delete</button>
                                </div>
                            </div>
                            <!-- Add more cards as needed -->
                        </div>
                    </div>
                </div>


            </div>
            <div class="col-md-2 bg-light" id="user-menu">
                <div class="form-group mt-4 mx-2">
                    <label for="summarization-method">Select Summarization Method</label>
                    <select class="form-control" id="summarization-method" disabled>
                        <option value="spacy">SpaCy</option>
                        <option value="nltk">NLTK</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                <button id="summarize-button" class="btn btn-primary mx-2" disabled>Summarize</button>
            </div>
    </section>
    </div>

    <script>
        const documentContainer = document.getElementById("document-container");
        const selectSummarizeButton = document.getElementById("summarize-button");
        const summarizationMethodSelect = document.getElementById("summarization-method");

        const cards = documentContainer.getElementsByClassName("card");
        const selectedCards = new Set();

        // Add a click event listener to each card
        for (const card of cards) {
            const checkbox = card.querySelector("input[type='checkbox']");

            // Toggle selection when the card or its associated checkbox is clicked
            card.addEventListener("click", (event) => {
                toggleSelection(card, checkbox);
            });

            checkbox.addEventListener("click", (event) => {
                toggleSelection(card, checkbox);
            });
        }

        function toggleSelection(card, checkbox) {
            card.classList.toggle("selected");
            checkbox.checked = card.classList.contains("selected");

            // Add or remove the card from the set of selected cards
            if (card.classList.contains("selected")) {
                selectedCards.add(card);
            } else {
                selectedCards.delete(card);
            }

            // Enable or disable the options based on the selected card count
            if (selectedCards.size > 0) {
                selectSummarizeButton.disabled = false;
                summarizationMethodSelect.disabled = false;
            } else {
                selectSummarizeButton.disabled = true;
                summarizationMethodSelect.disabled = true;
            }
        }

        // Example: To add a card when you drag and drop a document
        // You can add an event listener for the "drop" event and create a card dynamically.

        documentContainer.addEventListener("drop", (event) => {
            event.preventDefault();
            const documentData = event.dataTransfer.getData("documentData"); // Retrieve data from the drag event

            // Create a new card and add it to the document container
            const newCard = document.createElement("div");
            newCard.classList.add("card", "m-2");
            newCard.innerHTML = `
                <div class="card-body">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="customCheck1">
                        <label class="custom-control-label" for="customCheck1"></label>
                    </div>
                    <h5 class="card-title">Document Name</h5>
                    <p class="card-text">Date Uploaded: [DATE]</p>
                    <!-- Other document details can be added here -->
                </div>
            `;
            documentContainer.appendChild(newCard);
        });

        documentContainer.addEventListener("dragover", (event) => {
            event.preventDefault();
        });
    </script>
</body>

</html>